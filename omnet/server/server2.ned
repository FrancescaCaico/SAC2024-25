import org.omnetpp.queueing.Queue;
import org.omnetpp.queueing.Sink;
import org.omnetpp.queueing.Source; 
import org.omnetpp.queueing.Delay; 
import org.omnetpp.queueing.Router; 

//  DELAY --> IN[], OUT 
//  SOURCE --> OUT
//  SINK --> IN[]
//  QUEUE --> IN[] , OUT

network server2 {
    parameters: 
    double lambda = default(6.0);
    double mu_net = default(20); 
        double mu_cpu = default(10); 
        double mu_disk = default(15); 
        
        src.interArrivalTime = 1s*exponential(1/lambda); 
        net.serviceTime = 1s * exponential(1/mu_net); 
        cpu1.serviceTime = 1s * exponential(1/mu_cpu); 
        cpu2.serviceTime = 1s * exponential(1/mu_cpu); 
        disk.serviceTime = 1s * exponential(1/mu_disk); 

        router.routingAlgorithm = "roundRobin";
    submodules:
        src : Source; 
        net: Queue; 
        router : Router;
        cpu1: Queue; 
        cpu2: Queue; 
        disk : Queue; 
        sink : Sink;
        
        connections: 
        src.out -->net.in++; 
        net.out --> router.in++; 
        router.out++ --> cpu1.in++;
        cpu1.out --> disk.in++; 
        router.out++ --> cpu2.in++;
        cpu2.out --> disk.in++; 
        disk.out --> sink.in++; 
        
}
        
// #lambda	ResponseTime	sigma(ResponseTime)	UtilizationNet	sigma(UtilizationNet)	UtilizationCPUP	sigma(UtilizationCPUP)	UtilizationCPUS	sigma(UtilizationCPUS)	UtilizationDisk	sigma(UtilizationDisk)
// 6.0	0.303307869329586	0.0011512780590544251	0.300090716244618	0.0014619572264893722	0.300245086161498	0.0012182429328358713	0.299276910857788	0.001655096471877305	0.399261049668604	0.002843275129886379
// 6.5	0.315416507943352	0.0016802415246212018	0.324621339732668	0.0013405322444815873	0.324587390937358	0.0015085937353679392	0.32434273337182196	0.0018318882969620193	0.433063368717684	0.001766683343535136
// 6.7	0.32131172614321	0.0015596241602770626	0.33580794755693	0.0015154751692160282	0.335641496616776	0.0014191666112016682	0.335720998662404	0.0010816261657580187	0.446606145003542	0.0017555179818434308
// 6.8	0.324092087061178	0.0015494585973184758	0.339477944734066	0.001775866819054268	0.340766987637586	0.0018322982243295061	0.339648296409998	0.0023744525410788584	0.453155482962012	0.002210373669063117
// 6.9	0.325654197408624	0.0018926209567616647	0.343983575847168	0.0015016121323925635	0.34593199126061197	0.001506557259998923	0.34450432943401205	0.00100076992514507	0.45756192544771	0.0028567090955747177
// 7.1	0.332672559775986	0.001124627885958718	0.35511248822879804	0.0025355628476117537	0.35637785482135	0.0015112683418593634	0.35441307381089804	0.002934926233949583	0.47321280527614207	0.0013466156501525835
// 7.2	0.334657762953194	0.0015065082199037625	0.35923323418940395	0.0022595731325715913	0.360639927891312	0.002011388227019824	0.35892396802151805	0.002556657603864729	0.47941673640489196	0.0017710777758290104
// 7.3	0.33751377748492795	0.0012364352504795337	0.36516555333678	0.0020112540060238087	0.36523881804554803	0.0022412861833328635	0.36420284579289	0.0027284731554787383	0.486131196269846	0.0007055490531986039
// 7.4	0.340798964103538	0.0021607682477760306	0.368468023290106	0.0015804971952541411	0.36927800472260197	0.0028624412812062383	0.368180106857548	0.0009152392503788753	0.49248755616722806	0.0023749870333530016
// 7.5	0.34358250969578996	0.0006523055585720047	0.373201991476786	0.0011463134088347971	0.372891345471164	0.0007690660809773717	0.37436961116324197	0.002053060665713147	0.49812376973639594	0.0022733384307602974
// 7.6	0.347630099689944	0.002521646292942496	0.3787620567636839	0.001066584985466404	0.379718966638432	0.0013810405116060369	0.379680038079584	0.002806459138036744	0.5057281199310301	0.0027622310263745176
// 7.7	0.349442970201452	0.0019950983528174934	0.38401590277993797	0.0018263249944438413	0.38415146200599404	0.001322148748010002	0.383942238631154	0.001946916791250046	0.51075886773694	0.0016075240712158027
// 7.8	0.355436937136536	0.0017978764774580957	0.389519145560072	0.0006982750888039593	0.38985621257513003	0.0022227234272116287	0.390343002123746	0.0019892995258216223	0.519598119703934	0.001728761251256019
// 7.9	0.356289074476546	0.002114591291192611	0.39309760396631394	0.002723018420438425	0.39296412066481007	0.0033074021082361393	0.394401522878732	0.002177767513958045	0.52383167214726	0.0019578993816925473
// 7.90126	0.356542457810218	0.0017905917834119228	0.393026775872744	0.0022515812657455496	0.393232389684062	0.0029004497187292283	0.39450994979187193	0.0019119168826753495	0.523860225530664	0.0014467913143748103
// 7.95	0.359309061810646	0.0022994093362128736	0.396191525409958	0.0025707708942230567	0.396767008231848	0.0024811562570878176	0.397384643854946	0.0018121947204256515	0.5293931633779819	0.002828261153134482
// 8.0	0.36283625069888004	0.002206333019399527	0.398894361705442	0.0027168182675446685	0.39859839973966793	0.002739938182813989	0.40146221864974396	0.0006276171120830941	0.534034324901952	0.002589041162510164
// 8.1	0.36598232393529206	0.0015096057336796674	0.40418653508127605	0.0023988043117375607	0.404764079604558	0.0021128246289718955	0.406141031353104	0.0031105392370787753	0.540250301547812	0.0021141972747530484
// 8.2	0.368049195012724	0.003268673131190265	0.40935809849010596	0.003131092275800076	0.40918205460094	0.002913867482698939	0.410192411211378	0.0018084665983434435	0.5458154803790419	0.0028627482890368336
// 8.3	0.371120553807168	0.0021174132615113792	0.414021360652786	0.0027288077637878383	0.41269724843479	0.0029885841706343975	0.413709256787378	0.00261436574940621	0.551703488181246	0.0016922174403615961

// (20, ∞) --> NON ACETTABILE
// (15, 1/14 (205 + 5 sqrt(57))) --> NON ACCETTABILE
// (-∞, 1/14 (205 - 5 sqrt(57))) -->  11.94648770

// // VISUALIZZIAMO CON 12...
// #lambda	ResponseTime	sigma(ResponseTime)	UtilizationNet	sigma(UtilizationNet)	UtilizationCPUP	sigma(UtilizationCPUP)	UtilizationCPUS	sigma(UtilizationCPUS)	UtilizationDisk	sigma(UtilizationDisk)
// 10.0	0.458163653024786	0.002099708172562302	0.5010352974001899	0.0017059783086419806	0.50142468263738	0.0016607685488709242	0.50065473309306	0.0034104819860422617	0.667380927120774	0.00376805502636475
// 10.2	0.47266081335039606	0.0021431481112807018	0.511031948910178	0.002258017672003651	0.510389710774134	0.0033030315086852525	0.509260603277042	0.0022135955193464947	0.6811434790183519	0.0012953326771391412
// 10.4	0.48487360869085394	0.002217129059075025	0.519847759538256	0.0019734092544578404	0.5207287041319381	0.0022605032539250143	0.518654603387518	0.0020570198520655663	0.693294426892138	0.0016465811628087296
// 10.6	0.4993473519310839	0.0046854227965544455	0.53051084553562	0.0013950811539927932	0.5316526916031419	0.0013985233129834428	0.5279987805014701	0.0017380822022462488	0.7052355025743239	0.0021322187374619083
// 10.8	0.517296346888932	0.0065897365557804795	0.539497743336792	0.0027967354096414044	0.54153467263041	0.0030419105390066775	0.54068091932195	0.003606458899052335	0.7199238148242839	0.0035444661129485407
// 11.0	0.533227421104396	0.004391312786887883	0.552367050999222	0.0036627332496511266	0.5477352713508681	0.0028823215751981406	0.5497442825035541	0.0014792376380407426	0.734114799599964	0.003220941431809786
// 11.2	0.5546206823448001	0.007778482289356305	0.559159073209196	0.00290246948359831	0.5589567700939859	0.000909778995316164	0.56016324154797	0.0012572525679226724	0.745214689177772	0.0037318588875044647
// 11.4	0.581029810806222	0.003234467996437107	0.570340571061082	0.0023739556280451095	0.570168656918266	0.0028832627717118972	0.5701226112272441	0.0025989310887744844	0.762325339367074	0.0020663357863134717
// 11.5	0.5894045781151199	0.005967412794055558	0.574211420478876	0.001129350682001158	0.5751382757584881	0.0018320666341813017	0.574565735453354	0.001859187746370601	0.7667983273701899	0.0011824980678385466
// 11.6	0.59374472884414	0.004554069911432413	0.5775894865026039	0.0013208614095522194	0.579618028437946	0.0023097508075787896	0.578731910315278	0.0015252817865370183	0.7705243782879639	0.0008530200908245057
// 11.7	0.604436943954026	0.005262694415485155	0.585431135645912	0.001966100027683054	0.583850553144356	0.004934656521623364	0.5830928386020521	0.0018984556921238251	0.7798323503712979	0.0025500093759395458
// 11.8	0.6232307763495941	0.008153446298333238	0.590948920912844	0.0019084163163149658	0.591569661336298	0.001877400261266947	0.590027272590116	0.003150893188292608	0.786215338829254	0.005083005054522916
// 11.9	0.638516260024364	0.0076199446723555124	0.5960894986324681	0.0026997270570107597	0.5949605164456659	0.0015811863046985215	0.59419226421893	0.0013047481664157892	0.792480512385392	0.0027468525756165103
// 11.91	0.6377194948042358	0.006914497439370191	0.594889264884956	0.0012596239169769799	0.593084498965686	0.0025038042454709397	0.593934282043002	0.003311235731431711	0.7931091868133879	0.0011915870007298834
// 11.92	0.645706005909088	0.010978741864030252	0.597400840939346	0.0015855076737652698	0.5968243932592759	0.0036408900433310644	0.596510611496994	0.00171894604121769	0.7950793675210059	0.003103012934537059
// 11.93	0.637934739951476	0.009352319693390622	0.596290818905198	0.0016036747008561613	0.59427475571618	0.00309237365215938	0.59582126875823	0.003133997258551478	0.795013431272616	0.0009468235987703118
// 11.94	0.643697141495688	0.008891963519313763	0.596748338155864	0.0015525118160175037	0.598391489218788	0.003556175279060574	0.598025352238618	0.0019902382602253227	0.795520845179138	0.004460954328482051
// 11.95	0.645201760599216	0.006441072927712691	0.5987148557045	0.0016943723663120594	0.59788886192431	0.0038791409696858265	0.5956472902842039	0.003180975632428982	0.7968586822589581	0.0028696479083563852
// 11.96	0.6400835634681259	0.008501888208291935	0.597655499511142	0.00186068541072766	0.5978261760188641	0.0023061099249401516	0.5962868841182499	0.0016148535224520053	0.795634709328192	0.0026770596767751414
// 11.97	0.649478583704876	0.010683627283634393	0.5993926588494201	0.0029529866560202927	0.59968287807775	0.005594071400249173	0.597449774358464	0.0039013415474136192	0.79854407561689	0.005916730487640926
// 11.98	0.650944578395614	0.0027751531596223672	0.601501613574802	0.0020132987418211503	0.597555811749234	0.004930697451826993	0.600897382778528	0.002964478253527507	0.799960265193242	0.003543708381603533
// 11.99	0.649213765570298	0.009415377817874037	0.6003121898483139	0.001617974375833869	0.60068980855369	0.0033627074724837266	0.5992292554043279	0.0009395593361311819	0.799516256889494	0.0029530277429182916
// 12.0	0.6565141289145561	0.0062823753221036205	0.6026598932901279	0.0017695820635728686	0.601944938125046	0.002880195585294973	0.602446962545978	0.001636109498286095	0.801382409784218	0.002596931668765088
// 12.1	0.6715871921057059	0.005075794789247441	0.606890552980528	0.003050809145829032	0.605526813164242	0.0025112331753408454	0.605389328230502	0.0025943857395218095	0.807416345465214	0.0016830973123034686
// 12.15	0.668872869002968	0.008142483459295333	0.60743694807891	0.0021481573472498213	0.607625302655254	0.004871265881219604	0.6052756909893799	0.0033352946030087076	0.8092360271455881	0.0033142201005752414
// 12.2	0.684171508473552	0.007117364424024282	0.6106793634461439	0.002167639696321462	0.60937284530492	0.0031934768152365274	0.6093084685722401	0.0019511088449378135	0.812651441606754	0.003479663555449514
// 12.25	0.691091213190062	0.014239564400567553	0.61421308941629	0.0012635278967238484	0.6137728498552759	0.004044367220047785	0.613294921736202	0.0023072374587594707	0.819378899956118	0.0018283759933841624 <------
// 12.3	0.7052052048467321	0.02146980542268326	0.61458074263383	0.002274099364928476	0.61459826623866	0.003173315544261456	0.6155528883957059	0.0016639677815325025	0.8184387212044439	0.004911189306862245

// adesso è il disco il nuovo collo
